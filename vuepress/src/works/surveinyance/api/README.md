# API 仕様

## API について

surveinyance は API を用いて監視対象のサーバとやり取りをします。ただし、どの API を用いるにもソフトウェアや対象の性質上アクセストークンを必要とします。すべてハッシュ化された上でデータベースに保管されるため、再度表示することはできません。  
ストリーミング API も用意しており、リアルタイムな監視を可能とします。

### Surveinyance API

[こちら](/works/surveinyance/api/SurveinyanceAPI)のページを参照してください。

### ストリーミング API

[こちら](/works/surveinyance/api/streaming)のページを参照してください。

## アクセストークンについて

HTTP API を用いて発行する方法の他に以下の方法も提供しています。

### セットアップ時に発行する方法

セットアップ完了時にアクセストークンを表示します。これは一度しか表示されないため、注意する必要があります。

### サーバで任意のタイミングで発行する方法

サーバ側へ SSH 等で接続し、ターミナルで

```
$ surveinyance key-generate
```

と実行することで発行することができます。

## トークンを無効にする方法

使用していない、あるいは流出してしまった場合に、トークンを無効にすることができます。
こちらはサーバからの操作だけでなく、クライアントからも操作することができます。

### サーバからトークンを無効にする場合

サーバ側へ SSH 等で接続し、ターミナルで

```
$ surveinyance key-terminateAll # すべてのキーを無効に
$ surveinyance key-terminate <token> # 指定したトークンのキーを無効に
```

とすることで実行できます。
